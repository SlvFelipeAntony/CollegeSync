<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}CollegeSync{% endblock %}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

    <style>
        .nav-link:hover {
            background-color: rgba(255,255,255,0.1);
        }
        /* Ajuste para garantir que o texto não quebre ícones na sidebar */
        .nav-link {
            white-space: nowrap;
        }
    </style>
</head>
<body class="d-flex w-100 vh-100 overflow-hidden">

<div class="d-flex flex-column p-3 text-bg-dark h-100 overflow-y-auto" style="width: 280px; min-width: 280px;">

    <a href="{{ url_for('index') }}"
       class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
        <i class="bi bi-mortarboard-fill fs-4 me-2"></i>
        <span class="fs-4">CollegeSync</span>
    </a>

    <hr>

    <ul class="nav nav-pills flex-column mb-auto">

        <li class="nav-item">
            <a href="{{ url_for('index') }}" class="nav-link text-white" aria-current="page">
                <i class="bi bi-calendar-week me-2"></i>
                Minha Agenda
            </a>
        </li>

        {% if session['usuario_tipo'] == 'admin' %}
        <li class="nav-item mt-3">
            <span class="text-white-50 ms-3 small text-uppercase fw-bold">Administração</span>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('admin_dashboard') }}" class="nav-link text-white text-danger">
                <i class="bi bi-speedometer2 me-2 text-danger"></i>
                Painel Admin
            </a>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('admin_users') }}" class="nav-link text-white">
                <i class="bi bi-people-fill me-2"></i>
                Usuários
            </a>
        </li>
        {% endif %}

        {% if session['usuario_tipo'] == 'student' %}
        <li class="nav-item mt-3">
            <span class="text-white-50 ms-3 small text-uppercase fw-bold"
                  style="font-size: 0.75rem;">Área do Aluno</span>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('new_appointment') }}" class="nav-link text-white text-warning">
                <i class="bi bi-plus-circle-fill me-2 text-warning"></i>
                Novo Agendamento
            </a>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('my_subjects') }}" class="nav-link text-white">
                <i class="bi bi-journal-bookmark me-2"></i>
                Minhas Matérias
            </a>
        </li>
        {% endif %}

        {% if session['usuario_tipo'] == 'teacher' %}
        <li class="nav-item mt-3">
            <span class="text-white-50 ms-3 small text-uppercase fw-bold"
                  style="font-size: 0.75rem;">Área do Professor</span>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('new_appointment') }}" class="nav-link text-white text-warning">
                <i class="bi bi-plus-circle-fill me-2 text-warning"></i>
                Novo Agendamento
            </a>
        </li>
        <li class="nav-item">
            <a href="{{ url_for('my_students') }}" class="nav-link text-white">
                <i class="bi bi-people-fill me-2"></i>
                Meus Alunos
            </a>
        </li>
        {% endif %}

    </ul>

    <hr>

    <div class="dropdown">
        <a href="#" class="d-flex align-items-center text-white text-decoration-none dropdown-toggle"
           data-bs-toggle="dropdown" aria-expanded="false">
            <div class="rounded-circle bg-secondary d-flex justify-content-center align-items-center me-2"
                 style="width: 32px; height: 32px;">
                <i class="bi bi-person-fill"></i>
            </div>
            <strong>{{ session['usuario_nome'] }}</strong>
        </a>
        <ul class="dropdown-menu dropdown-menu-dark text-small shadow">
            <li><a class="dropdown-item" href="{{ url_for('profile') }}">Perfil</a></li>
            <li>
                <hr class="dropdown-divider">
            </li>
            <li><a class="dropdown-item text-danger" href="{{ url_for('logout') }}">Sair</a></li>
        </ul>
    </div>
</div>

<div class="container-fluid p-4 bg-light h-100 overflow-y-auto w-100">

    {% with messages = get_flashed_messages() %}
    {% if messages %}
    {% for message in messages %}
    <div class="alert alert-info alert-dismissible fade show" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% endfor %}
    {% endif %}
    {% endwith %}

    {% block content %}
    {% endblock %}

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>